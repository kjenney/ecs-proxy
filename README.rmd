# ecs-proxy

Proxy connections from a PrivateLink NLB to a set of a ECS services

## Components

1. VPC - dependency
    a) Subnets
    b) Security groups
2. NLB
    a) Listeners
3. ECS services
    a) Instances


 ## Testing

```
terraform init
terraform apply
```

You'll have to wait a couple of minutes for the Target groups` instances to become available after initial attachment

```
dns_name=$(terraform output -raw nlb_dns_name)
first_port=$(terraform output -raw first_service_port)
export DNS_NAME=$dns_name
export FIRST_PORT=$first_port
echo "The DNS name of the ALB is $DNS_NAME"
echo "The first ECS Service is listening on port $FIRST_PORT"
curl http://$DNS_NAME:$FIRST_PORT
 ```